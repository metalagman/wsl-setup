---
- name: Get Go GOPATH
  ansible.builtin.command: go env GOPATH
  register: golang_go_gopath
  changed_when: false

- name: Install goimports
  environment:
    GOBIN: "{{ golang_go_gopath.stdout }}/bin"
  ansible.builtin.command: go install golang.org/x/tools/cmd/goimports@v0.24.0
  args:
    creates: "{{ golang_go_gopath.stdout }}/bin/goimports"

- name: Install golangci-lint
  environment:
    GOBIN: "{{ golang_go_gopath.stdout }}/bin"
  ansible.builtin.command: go install github.com/golangci/golangci-lint/v2/cmd/golangci-lint@v2.5.0
  args:
    creates: "{{ golang_go_gopath.stdout }}/bin/golangci-lint"
